<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>latex | A perfect autumn day</title>
    <link>/tags/latex/</link>
      <atom:link href="/tags/latex/index.xml" rel="self" type="application/rss+xml" />
    <description>latex</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>© 2019</copyright><lastBuildDate>Wed, 14 Nov 2018 00:00:00 +0900</lastBuildDate>
    <image>
      <url>/img/icon-192.png</url>
      <title>latex</title>
      <link>/tags/latex/</link>
    </image>
    
    <item>
      <title>Tufte-LaTeXとtufte-org-modeについて</title>
      <link>/post/tufte/</link>
      <pubDate>Wed, 14 Nov 2018 00:00:00 +0900</pubDate>
      <guid>/post/tufte/</guid>
      <description>

&lt;p&gt;以前の記事（&lt;a href=&#34;../org-mode_paper_1&#34;&gt;Emacsのorg-modeで論文を書く（その1：pdfとhtmlへの出力）&lt;/a&gt;）にも書いたが，Tufte−LaTeXなるものを愛用している．今回はこれについてもう少し詳しく書いてみたい．&lt;/p&gt;

&lt;p&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;/p&gt;

&lt;h2 id=&#34;tufte-latex&#34;&gt;&lt;a href=&#34;https://tufte-latex.github.io/tufte-latex/&#34; target=&#34;_blank&#34;&gt;Tufte-LaTeX&lt;/a&gt;&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.edwardtufte.com/tufte/index&#34; target=&#34;_blank&#34;&gt;Edward R. Tufte&lt;/a&gt;によって作られたページレイアウトのためのlatex packageである．典型的には文章が左側に配置され，右側には広いマージンがありノート，文献，表，図などが配置されるスタイルである．&lt;/li&gt;
&lt;li&gt;さて，このスタイルが何の役に立つかというと，報告書の作成の際に図を入れたりするときに，latexのfloatを使うと案外思うところに挿入されないことがある．このスタイルだと，図は少し小さくなるが，きちんと横に納まってくれるのがよい．&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tufte-latex.github.io/tufte-latex/&#34; target=&#34;_blank&#34;&gt;Tufte-LaTeX&lt;/a&gt;のサイトには，&amp;rdquo;the style of Edward R. Tufte and Richard Feynman&amp;rdquo;と書かれている．ん，と思って調べてみると，やはり，あの物理学者のファインマンのことであった．興味のある方は，The Feynman-Tufte Principleでググってみると面白いかもしれない．&lt;/li&gt;
&lt;li&gt;以前の記事（&lt;a href=&#34;../latexmk&#34;&gt;LaTeXをインストールし，texファイルが変更されると，自動的にcompileしてskimでのpdfも自動で更新されるようにする（2018年9月1日追記）&lt;/a&gt;）に書いたようにtexliveをインストールしてあれば，tufte-latexは一緒にインストールされているので，新たにインストールする必要はない．&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;tufte-org-mode&#34;&gt;&lt;a href=&#34;https://github.com/tsdye/tufte-org-mode&#34; target=&#34;_blank&#34;&gt;tufte-org-mode&lt;/a&gt;&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/tsdye/tufte-org-mode/blob/master/README.md&#34; target=&#34;_blank&#34;&gt;tufte-org-mode&lt;/a&gt;は，上述のlatexのtufte classをorg-modeから使えるようにした有り難いパッケージである．このおかげでlatexの記法を意識することなく，org-modeで普通に文章を書いていき，最後に後述する如く，オマジナイを唱えればTufte styleのpdfができあがる．&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;設定&#34;&gt;設定&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;下記の2つの設定で使えるようになる．init.orgでの設定の順番はどちらが先でも動く．&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;tufte-org-modeのインストールと設定&#34;&gt;tufte-org-modeのインストールと設定&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;以下のようにinit.orgに書き込んで設定する．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ox-tufte-latex.elは上記の &lt;a href=&#34;https://github.com/tsdye/tufte-org-mode&#34; target=&#34;_blank&#34;&gt;tufte-org-mode&lt;/a&gt;からダウンロードしてローカルに置いてインストールしている．パスは各自の環境に合わせて変更していただきたい．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+begin_src emacs-lisp
(quelpa
 &#39;(ox-tufte-latex :fetcher file :path &amp;quot;/path/to/ox-tufte-latex.el&amp;quot;)
 )
(use-package ox-tufte-latex)
#+end_src
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;quelpaは，use-packageでうまくインストール出来ないときに重宝する．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;quelpaについては以下を参照&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/quelpa/quelpa&#34; target=&#34;_blank&#34;&gt;Quelpa&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://emacs.rubikitch.com/quelpa/&#34; target=&#34;_blank&#34;&gt;quelpa.el : 【本邦初公開】MELPAを改善した新しいパッケージ管理システム&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://qiita.com/tadsan/items/99bd9a5bbdb36def13e2&#34; target=&#34;_blank&#34;&gt;CaskからQuelpaに移行する&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;org-modeでtufte-latexの設定&#34;&gt;org-modeでtufte-latexの設定&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;ox-latexの設定などは以前の記事（&lt;a href=&#34;../org-mode_paper_1&#34;&gt;Emacsのorg-modeで論文を書く（その1：pdfとhtmlへの出力）&lt;/a&gt;）に書いたようにinit.orgに記述しておく．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;以下のようにinit.orgに書き込んで設定する．これは以前の記事（&lt;a href=&#34;../org-mode_paper_1&#34;&gt;Emacsのorg-modeで論文を書く（その1：pdfとhtmlへの出力）&lt;/a&gt;）と重複するが，念のためにここにも書いておく．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+begin_src emacs-lisp
;; tufte-handout class for writing classy handouts and papers
(add-to-list &#39;org-latex-classes
             &#39;(&amp;quot;tufte-handout&amp;quot;
               &amp;quot;\\documentclass[twoside,nobib]{tufte-handout}
                                   [NO-DEFAULT-PACKAGES]
                                                                    \\usepackage{zxjatype}
                                                                    \\usepackage[hiragino-dx]{zxjafont}&amp;quot;
               (&amp;quot;\\section{%s}&amp;quot; . &amp;quot;\\section*{%s}&amp;quot;)
               (&amp;quot;\\subsection{%s}&amp;quot; . &amp;quot;\\subsection*{%s}&amp;quot;)))
;; tufte-book class
(add-to-list &#39;org-latex-classes
             &#39;(&amp;quot;tufte-book&amp;quot;
               &amp;quot;\\documentclass[twoside,nobib]{tufte-book}
                                  [NO-DEFAULT-PACKAGES]
                                                                   \\usepackage{zxjatype}
                                                                    \\usepackage[hiragino-dx]{zxjafont}&amp;quot;
               (&amp;quot;\\part{%s}&amp;quot; . &amp;quot;\\part*{%s}&amp;quot;)
               (&amp;quot;\\chapter{%s}&amp;quot; . &amp;quot;\\chapter*{%s}&amp;quot;)
               (&amp;quot;\\section{%s}&amp;quot; . &amp;quot;\\section*{%s}&amp;quot;)
               (&amp;quot;\\subsection{%s}&amp;quot; . &amp;quot;\\subsection*{%s}&amp;quot;)
               (&amp;quot;\\paragraph{%s}&amp;quot; . &amp;quot;\\paragraph*{%s}&amp;quot;)))
#+end_src
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ここまでEmacsを設定した上で，orgで原稿を書き，C-c C-eと打てば，以下のような画面になる．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/org-C-c-C-e.jpg&#34; &gt;

&lt;img src=&#34;/img/org-C-c-C-e.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ここで，l oと打つと普通（Tufte styleではない）のpdfがオープンされてしまう．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Tufte styleのpdfを得るためには，T pと打って，Export to Tufte LaTeX の中からAs PDF file and openを選択しなければならない．これで，原稿が得られ，skimでオープンされる．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;tufteの使用の実例&#34;&gt;tufteの使用の実例&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;それでは実例を示してみる．以下のような書類を作成し，Tufte_test.orgとして保存する．hoge_fuga.jpgなどの画像は全てTufte_test.orgファイルと同じdirectoryにあるものとする．&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;前半の＃で始まる行が続く部分はorg-modeの設定であり，latexのこのパッケージを使うぞ，とか，org-modeのヘッダーをどの深さまで表示するかなどを決めている．詳細はググればすぐに分かるので略&amp;hellip;..(^^;;;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;:offset -8inによって，図の位置を上にずらしてバランスをとるようにしているのにご注意いただきたい．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+LaTeX_CLASS: tufte-handout
#+LaTeX_CLASS_OPTIONS: [12pt]
#+LATEX_HEADER: \usepackage{geometry}
#+LATEX_HEADER: \geometry{left=0.6in,top=1in,bottom=1in}
#+LaTeX_HEADER: \usepackage[sort,compress,super,comma]{natbib}
#+STARTUP:  overview
#+STARTUP:  hidestars
#+OPTIONS:   H:4 num:nil toc:nil \n:nil @:t ::t |:t ^:t -:t f:t *:t TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+LINK_UP:
#+LINK_HOME:
#+OPTIONS: author:nil date:nil

#+begin_fullwidth
\centering
#+LATEX: \huge{\textbf{hoge/fugaによる相補的な治療における高難度症例の治療と成績}}
\vspace{0.5cm}\\
#+LATEX: \normalsize{taipapa, 織田信長, 豊臣秀吉, 徳川家康}\\
\vspace{0.5cm}\\
#+LATEX: \normalsize{hogefuga大学大学院 hogefuga研究科 hogefuga分野}
#+end_fullwidth

* *背景と目的*
hogeとfugaを比較し，治療成績を比較する．
​* *結果*
まず，hogefugaの軽症例の画像を呈示する (*Fig. [[hoge_fuga2]]*)．

\vspace{0.25cm}

そのころわたくしは、モリーオ市の博物局に勤めて居りました。

十八等官でしたから役所のなかでも、ずうっと下の方でしたし俸給もほんのわずかでしたが、受持ちが標本の採集や整理で生れ付き好きなことでしたから、わたくしは毎日ずいぶん愉快にはたらきました。殊にそのころ、モリーオ市では競馬場を植物園に拵え直すというので、その景色のいいまわりにアカシヤを植え込んだ広い地面が、切符売場や信号所の建物のついたまま、わたくしどもの役所の方へまわって来たものですから、わたくしはすぐ宿直という名前で月賦で買った小さな蓄音器と二十枚ばかりのレコードをもって、その番小屋にひとり住むことになりました。わたくしはそこの馬を置く場所に板で小さなしきいをつけて一疋の山羊を飼いました。毎朝その乳をしぼってつめたいパンをひたしてたべ、それから黒い革のかばんへすこしの書類や雑誌を入れ、靴もきれいにみがき、並木のポプラの影法師を大股にわたって市の役所へ出て行くのでした。

あのイーハトーヴォのすきとおった風、夏でも底に冷たさをもつ青いそら、うつくしい森で飾られたモリーオ市、郊外のぎらぎらひかる草の波。

またそのなかでいっしょになったたくさんのひとたち、ファゼーロとロザーロ、羊飼のミーロや、顔の赤いこどもたち、地主のテーモ、山猫博士のボーガント・デストゥパーゴなど、いまこの暗い巨きな石の建物のなかで考えていると、みんなむかし風のなつかしい青い幻燈のように思われます。では、わたくしはいつかの小さなみだしをつけながら、しずかにあの年のイーハトーヴォの五月から十月までを書きつけましょう。

\vspace{0.25cm}

ついで，hogefugaの重症例の画像を呈示する (*Fig. [[hoge_fuga]]*)．

#+NAME: hoge_fuga2
#+caption: hoge-fuga（軽症例である）
#+attr_latex: :float margin :width 2.8in :offset -8in
#+attr_latex: :vertical-alignment t
[[./hoge_fuga2.jpg]]

#+NAME: hoge_fuga
#+caption: hoge-fuga（重症例である）
#+attr_latex: :float margin :width 2.8in :offset -2in
#+attr_latex: :vertical-alignment t
[[./hoge_fuga.jpg]]


* *結論*
hogefugaによる治療は有効である．
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ついで，前述のごとく，Emacsでこの文書を開いた状態で，C-c C-e T pと打てば，以下のようなpdfがskimで開かれる．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/Tufte_test_v5.jpg&#34; &gt;

&lt;img src=&#34;/img/Tufte_test_v5.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;上述のように，:offset の部分で図の位置を調整している．これなしだと，かなり下の方に位置してしまう．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;なかなか良い感じになっている．(^o^)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;今回は，Tufte styleの紹介であった．実は，このスタイルを手術所見を書くのに使用している．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Emacsとskimで，latexのソースとpdfの間を行ったり来たり</title>
      <link>/post/synchronization/</link>
      <pubDate>Sun, 07 Oct 2018 00:00:00 +0900</pubDate>
      <guid>/post/synchronization/</guid>
      <description>

&lt;p&gt;以前の記事（&lt;a href=&#34;../beamer&#34;&gt;beamerでスライド原稿用pdfを作成する（その１）&lt;/a&gt;）で，Emacsでbeamerを用いてlatexのソースを書いてコンパイルし，スライド原稿としてpdfを出力する方法をまとめた．この際に，pdfの特定の箇所がlatexのソースでどこに当たるのかがわかったり，逆に，latexのソースの特定の箇所がpdf上のどこに当たるのかがわかったりすると便利である．今回はそれについてまとめる．なお，auctexの全般的な設定については，TeXWikiの&lt;a href=&#34;https://texwiki.texjp.org/?AUCTeX#h32722ec&#34; target=&#34;_blank&#34;&gt;macOS での設定例&lt;/a&gt; を参照していただきたい．&lt;/p&gt;

&lt;p&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;参照：&lt;a href=&#34;https://ryogan.org/blog/2015/12/30/mac-os-x-el-capitan-の-auctex-の設定/&#34; target=&#34;_blank&#34;&gt;Mac OS X El Capitan の AUCTeX の設定&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参照：&lt;a href=&#34;https://texwiki.texjp.org/?Emacs#e9c08b3d&#34; target=&#34;_blank&#34;&gt;skimとの連携&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参照：&lt;a href=&#34;https://skalldan.wordpress.com/2011/07/20/auctex-の設定と便利な機能/&#34; target=&#34;_blank&#34;&gt;AUCTeX の設定と便利な機能&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参照：&lt;a href=&#34;https://sourceforge.net/p/skim-app/wiki/TeX%5Fand%5FPDF%5FSynchronization/&#34; target=&#34;_blank&#34;&gt;TeX_and_PDF_Synchronization&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;backward-search&#34;&gt;backward search&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;こちらのほうが便利なので最初に説明する．&lt;/li&gt;
&lt;li&gt;skimで表示されたpdf上の特定の箇所に該当するLaTeX文書の箇所を探して示してくれる．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;この機能を可能にするには，skimの環境設定を開いて「同期する」の初期値を「カスタム」とし，コマンドのところに以下のように打ち込む．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ /usr/local/Cellar/emacs-mac/emacs-26.1-z-mac-7.1/bin/emacsclient
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;defaultでは初期値に「Emacs」となっており，本来ならこれで動くはずだが，homebrewで最新のEmacsをinstallしたために，もともと入っているemacsとはversionが異なる．つまり，サーバーとして起動しているEmacsと、使用するEmacsClientのバージョンが異なることになり，このままでは動かない．そこで，homebrewでインストールした方をfull pathで明示的に指示する必要がある．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;引数のところには，以下のように打ち込む．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ --no-wait +%line &amp;quot;%file&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;つまりこうなる．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/skim-1.jpg&#34; &gt;

&lt;img src=&#34;/img/skim-1.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;一方，Emacsのinit.orgには以下のように記述して，Emacs serverを立ち上げておく．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+begin_src emacs-lisp
;; Starts the Emacs server
(server-start)
#+end_src
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;これで，pdf上の任意の箇所で，Shift-Command-Clickすると，該当するlatex documentの箇所に飛ぶ．&lt;del&gt;もし，Emacsが立ち上がっていなければ，Emacsを立ち上げるところからやってくれる．素晴らしい！&lt;/del&gt; これは確かめてみると勘違いであった．Emacsは立ち上げておかないといけない．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;この機能は知ってしまうと，無くてはならないほど便利に感じる機能である．pdfで間違いを見つけたときに，それがlatexソースのどこに相当するかを同定するのは結構面倒であるが，この機能により一発で同定することができる．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;該当箇所が少しずれることがあるのが欠点であるが，それでも十分に役に立つ．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;forward-search&#34;&gt;forward search&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;こちらも，backward searchほどではないが，役に立つ．&lt;/li&gt;
&lt;li&gt;Emacs上のlatex document上の特定の箇所に該当するpdfの箇所を探して示してくれる．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;この機能を可能にするには，init.orgに以下のように記述する．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+begin_src emacs-lisp
(add-hook &#39;LaTeX-mode-hook
          (function (lambda ()
                      (add-to-list &#39;TeX-command-list
                                   &#39;(&amp;quot;displayline&amp;quot;
                                     &amp;quot;/Applications/Skim.app/Contents/SharedSupport/displayline %n %s.pdf \&amp;quot;%b\&amp;quot;&amp;quot;
                                     TeX-run-discard-or-function t t :help &amp;quot;Forward search with Skim&amp;quot;))
                      )))
#+end_src
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;これで，C-c C-c displayline により，Emacsのlatex document上の特定の箇所に該当するpdfの箇所に飛んでくれる．pdfの該当するところが赤丸で示される（数秒で消える）．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ただし，該当する箇所が結構ずれてしまうことが多い．最近は，beamerでしか使わないので，もしかすると，通常のlatex 文書だと狂いなく示すのかもしれない．まぁ，backward searchと違って， なくても困らない機能である．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Emacsのorg-modeで論文を書く（その3：org-modeとbibtexとreftexの連携による文献引用の自動化）</title>
      <link>/post/org-mode_paper_3/</link>
      <pubDate>Sat, 15 Sep 2018 00:00:00 +0900</pubDate>
      <guid>/post/org-mode_paper_3/</guid>
      <description>

&lt;p&gt;前回（&lt;a href=&#34;../org-mode_paper_2&#34;&gt;Emacsのorg-modeで論文を書く（その2：BibDeskによる論文収集と整理）&lt;/a&gt;）は，BibDeskを用いて文献情報をbibtex ファイルとして収集する方法についてまとめた．今回は，この文献情報を利用した引用をEmacsのorg-modeでどのように自動化するかについてまとめる．早い話が，org-modeからlatexのbibtexとreftexの機能を利用するということになる．&lt;/p&gt;

&lt;p&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;/p&gt;

&lt;h2 id=&#34;org-mode-reftex-setup&#34;&gt;org-mode-reftex-setup&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;参照サイト：&lt;a href=&#34;http://www.mfasold.net/blog/2009/02/using-emacs-org-mode-to-draft-papers/&#34; target=&#34;_blank&#34;&gt;Using Emacs Org-mode to Draft Papers&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;RefTex-ModeというものがEmacsには含まれている．文献や引用の管理のためのパッケージである．詳細はC-h iでマニュアルを見れば分かる，と言いたいところだが，このマニュアルが膨大である．そこで，RefTeX in a Nutshellという2ページほどの要約を読めば，使うのには十分であるとマニュアル自体に書いてある（笑）．実は私はそれすらろくに読んでいないが，以下のように設定すれば，十分に使える．設定方法は，以前の記事（&lt;a href=&#34;../init_org&#34;&gt;Emacsの設定（その2）設定ファイル（init.el）をorg-modeで管理する&lt;/a&gt;）に記載したとおり，init.orgに書き込めば良い．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+begin_src emacs-lisp
(defun org-mode-reftex-setup ()
  (load-library &amp;quot;reftex&amp;quot;)
  (and (buffer-file-name)
       (file-exists-p (buffer-file-name))
       (reftex-parse-all))
  (define-key org-mode-map (kbd &amp;quot;C-c )&amp;quot;) &#39;reftex-citation)
  )
(add-hook &#39;org-mode-hook &#39;org-mode-reftex-setup)
#+end_src
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;上記の設定により，参照サイトの説明のように，org-modeの中でreftex-citationの機能が働くようになる．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;org-mode-reftex-setupの使用方法&#34;&gt;org-mode-reftex-setupの使用方法&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;org-modeで文書を書いている最中に文献を引用したい箇所で，C-c ) と打つ&lt;/li&gt;
&lt;li&gt;すると，まず，どの文献リストを使うかを聞いてくるので，hogefuga-reference.bibなど使いたいリストの名前を打つ．前回説明した方法で収集した文献のbib ファイルが有るはずである．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;次に，文献を絞り込むためにキーワードを打つように催促されるので，それを打つ．すると，そのキーワードを有する文献のリストがずらずらと並ぶ．下図の例では，stetler と著者名を打ったときの結果が下のバッファに表示されている．該当する文献にカーソルを持ってくるか，クリックして選択し，リターンを押せば決定され，本文の該当箇所にその論文の cite-key，つまり，\cite{Stetler:2012jt} が入力される．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/reftex.jpg&#34; &gt;

&lt;img src=&#34;/img/reftex.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;上図の下のバッファ内でも，C-sの検索機能は使えるので，さらに絞り込みが必要な際は便利である．以前の記事（&lt;a href=&#34;../prelude_install&#34;&gt;Emacsの設定（その1）Preludeの導入&lt;/a&gt;）で述べたようにpreludeを導入して，かつ，helmを有効にしておけば，下図のようにC-sでswiperが使えて更に便利である．（なお，下図では，まず，heat shock proteinと打ち，ズラッと並んだ真ん中のバッファでC-sとやってstetlerと打ったところである．一番下のバッファにstetlerで絞り込まれた候補が並んでいる）&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/reftex-2.jpg&#34; &gt;

&lt;img src=&#34;/img/reftex-2.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ox-bibtex-dot-el&#34;&gt;&lt;a href=&#34;https://code.orgmode.org/bzg/org-mode/raw/master/contrib/lisp/ox-bibtex.el&#34; target=&#34;_blank&#34;&gt;ox-bibtex.el&lt;/a&gt;&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;参考サイト：&lt;a href=&#34;https://aliquote.org/post/org-and-bibtex/&#34; target=&#34;_blank&#34;&gt;Org and Bibtex&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;上述の作業で，文献を本文中にcite-keyとして引用することはできた．次に必要なのはorg-modeからpdfやhtmlにexportする際に，cite-keyをもとに，文献が雑誌の規定の様式で引用され，最後に文献リストが規定の様式で記述されるようにすることである．この面倒をみてくれるのが，&lt;a href=&#34;https://code.orgmode.org/bzg/org-mode/raw/master/contrib/lisp/ox-bibtex.el&#34; target=&#34;_blank&#34;&gt;ox-bibtex.el&lt;/a&gt; である．&lt;/li&gt;
&lt;li&gt;ox-bibtex.elは，org-plus-contrib packageの中に含まれているので，まず，org-plus-contribをインストールする．これは，&lt;a href=&#34;http://emacs-jp.github.io/packages/package-management/package-el.html&#34; target=&#34;_blank&#34;&gt;package.el&lt;/a&gt; を使えば簡単である．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;次いで，use-packageを使って，ox-bibtexを設定する．と言っても以下のようにinit.orgに書くだけである．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;(use-package ox-bibtex)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;なお，use-packageを使ってox-bibtexを設定する際に，defer t にすると，htmlへの文献のexportができなくなるので注意！&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;use-packageは非常に便利．emacsの新しいパッケージの導入と管理はこれでいいと思う．&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;参照サイト1：&lt;a href=&#34;https://github.com/jwiegley/use-package&#34; target=&#34;_blank&#34;&gt;use-package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参照サイト2：&lt;a href=&#34;https://qiita.com/kai2nenobu/items/5dfae3767514584f5220&#34; target=&#34;_blank&#34;&gt;use-packageで可読性の高いinit.elを書く&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ox-bibtex.elはbibtexをLaTeX, html, asciiにexportしてくれる．HTMLへのexportには，&lt;a href=&#34;https://www.lri.fr/~filliatr/bibtex2html/&#34; target=&#34;_blank&#34;&gt;bibtex2html&lt;/a&gt; が使われる．そこで，bibtex2htmlをインストールしておく．homebrewがインストールされていれば以下のようにすれば良い．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;brew install bibtex2html
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ox-bibtexの使い方はソースの最初に書いてあるとおりである．すなわち，文献をexportするためには，org-mode文書の冒頭に例えば以下を追加し，&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+LaTeX_HEADER: \usepackage[sort,compress,super,comma]{natbib}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;最後に，&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+BIBLIOGRAPHY: /Users/taipapa/Documents/hogefuga-references.bib Stroke_3-authors_alphabetical.bst option:-a limit:t
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;を追加する．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;#+LaTeX_HEADER: の行の最後の&lt;a href=&#34;https://ctan.org/pkg/natbib&#34; target=&#34;_blank&#34;&gt;natbib&lt;/a&gt; は，texliveに含まれる文献サポートのパッケージであり，1, 2, 3,&amp;hellip;.というような番号付タイプの文献引用や author-yearタイプの文献引用の両方に（それ以外にも）対応している．その手前はnatbibのオプションである．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;#+BIBLIOGRAPHY: のあとにfoo.bibを書くわけだが，この部分はフルパスで書いて良い．その後にはスタイルを書く．上記のStroke_3-authors_alphabetical.bstは自作だが，これは投稿ジャーナルの規定に合わせて作成する．ジャーナルによってはbst ファイルを用意してあるかもしれない．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;option: -foobar はbibtex2htmlに &amp;lsquo;foobar&amp;rsquo; を渡す．つまり&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;option:-d    sort by date
option:-a    sort as BibTeX (usually by author) *default*
option:-u    unsorted i.e. same order as in .bib file
option:-r    reverse the sort
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;複数のオプションを使用することも可能&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;option:-d option:-r
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;上述のように， &lt;strong&gt;limit:t&lt;/strong&gt; とすることにより，引用された文献のみのリストになる．これをしないと bib ファイルの中のすべての論文がリストになってしまう．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;bst-ファイルについて&#34;&gt;bst ファイルについて&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;bibtexにおいて引用のスタイルを決めているファイルであり，これを目指すジャーナルの投稿規定に合わせる．既にそのようなbst ファイルがあれば極楽だが，ない場合は大変である．この辺は以下のサイトを参照．

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ketsuago.com/entry/2015/03/16/231806&#34; target=&#34;_blank&#34;&gt;LaTeXで参考文献の形式を変更する方法（bstファイルの編集）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.med.osaka-u.ac.jp/pub/anes/www/html/manual/bibtex.html&#34; target=&#34;_blank&#34;&gt;BibTeXのドキュメント&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;bst-ファイルの置き場所&#34;&gt;bst ファイルの置き場所&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;これにはかなり悩まされたが，なんのことはないMacTeXのFAQサイトに書いてあった．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.tug.org/mactex/2013/faq/#qm05&#34; target=&#34;_blank&#34;&gt;The Most Frequently Asked Questions (FAQ)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;QM.06 :&lt;/strong&gt; Why can&amp;rsquo;t the latest MacTeX find my local BibTeX files? Earlier versions of MacTeX worked correctly.  &lt;br /&gt;
&lt;br /&gt;
 &lt;strong&gt;AM.06 :&lt;/strong&gt; TeX Live is slightly pickier about placement of these files. &amp;ldquo;.bib&amp;rdquo; files go in &lt;br /&gt;
 &lt;strong&gt;~/Library/texmf/bibtex/bib&lt;/strong&gt; &lt;br /&gt;
 or subfolders of this directory, and &amp;ldquo;.bst&amp;rdquo; files go in &lt;br /&gt;
 &lt;strong&gt;~/Library/texmf/bibtex/bst&lt;/strong&gt; &lt;br /&gt;
 or subfolders of this directory.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ここにおいておけば，パスを指定することなく，どこからでもbstファイルを指定してスタイルを決められる．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;文献を引用したorg-modeからのexportの実例&#34;&gt;文献を引用したorg-modeからのexportの実例&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ようやく，これで準備が整ったので，実例を示す．以下のファイルを作成し，hogefuga.orgとして保存する．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+LaTeX_CLASS: koma-jarticle
#+LaTeX_CLASS_OPTIONS: [12pt]
#+LATEX_HEADER: \usepackage{geometry}
#+LATEX_HEADER: \geometry{left=1in,right=1in,top=1in,bottom=1in}
#+LaTeX_HEADER: \usepackage[sort,compress,super,comma]{natbib}
#+STARTUP:  overview
#+STARTUP:  hidestars
#+OPTIONS:   H:4 num:nil toc:nil \n:nil @:t ::t |:t ^:t -:t f:t *:t TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+OPTIONS: date:nil
#+LINK_UP:
#+LINK_HOME:

#+TITLE: hoge/fugaによる相補的な治療における高難度症例の治療と成績
#+AUTHOR: taipapa, 織田信長, 豊臣秀吉, 徳川家康
\vspace*{-1.5cm}

\hspace{2.5cm} hogefuga大学大学院 hogefuga研究科 hogefuga分野

* 背景と目的
hogeとfugaを比較してみると，一方で難易度の高い症例でも他方では容易に行える場合も多い．\cite{Stetler:2012jt}当施設では，一方に片寄ることなく，hogeとfugaを相補的に用いることにより合併症の減少を目指す方針をとっている．そこで，自験例から高難度のhogefuga症例についての方針と成績を主にhogefuga surgeonの立場から検討した．
* 結果
hogefuga症例の画像である (*Fig. [[hoge_fuga]]*)．\cite{Cosentino:2011dn}

#+NAME: hoge_fuga
#+caption: hoge-fuga（重症例である）
#+attr_latex: :float t :width 3in  :align center
#+ATTR_HTML: :width 500  :float: wrap :align center
[[./hoge_fuga.jpg]]

* 結論
hogefugaによる治療は有効である．

#+BIBLIOGRAPHY: /Users/taipapa/Documents/hogefuga-References.bib Stroke_3-authors_alphabetical.bst option:-a limit:t
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;hogefuga-References.bibの部分やbstの部分は，それぞれ該当するファイルに置き換えていただきたい．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;\cite{Stetler:2012jt,Cosentino:2011dn} の部分は私のbibファイルにおけるcite-keyである．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;C-c C-e l o で，文献が番号付きで引用されたpdfが作成され，skimで開く．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;下図のように，文献リストも付いているし，本文中の番号をクリックすれば文献リストの該当論文にジャンプするリンク付きである．また，このbstでは著者名のアルファベット順を指定しているので，最初にでてきた文献が2に，二番目にでてきた文献が1になっていることに注意してほしい．さらに，著者名は3人までは全員記載し，4人以上の論文では4人目以降はet alになっている．bibtexの活用により，これらのことが自動的になされている．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/ref-pdf.jpg&#34; &gt;

&lt;img src=&#34;/img/ref-pdf.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ついで，htmlである．C-c C-e h o で，文献が番号付きで引用されたhtmlが作成され，browserで開く．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;下図のように，文献リストも付いているし，本文中の番号をクリックすれば文献リストの該当論文にジャンプするリンク付きである．その他もpdfと同様であるが，文献リストにはabstractやDOIも追加される．投稿する際はpdfか，別記事のようにwordにしてしまうので，html出力の設定はこれ以上触っていない．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/ref-html.jpg&#34; &gt;

&lt;img src=&#34;/img/ref-html.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ようやく，文献付きの原稿の出力の設定にまでたどり着くことができた．次回はpandocを利用して，org-modeからword ファイルを出力する方法をまとめる．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Emacsのorg-modeで論文を書く（その1：pdfとhtmlへの出力）</title>
      <link>/post/org-mode_paper_1/</link>
      <pubDate>Sat, 01 Sep 2018 00:00:00 +0900</pubDate>
      <guid>/post/org-mode_paper_1/</guid>
      <description>

&lt;p&gt;私がEmacsを使用している理由の一番大きなものはorg-modeである．あらゆる文書作成にorg-modeを用いている．org-modeを使って論文を書くことに関しては，ググってもらえばおわかりのように，ネット上に山のように情報が存在する．「屋上屋を架してどうする」と言う自分の中の声を押し殺し，あくまで備忘録ということで，あえてここにまとめておく．なお，私はGTDのツールとしてはorg-modeを全く使用していないので，その種の情報はここにはまったくないことをお断りしておく．&lt;/p&gt;

&lt;p&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;/p&gt;

&lt;h2 id=&#34;目的&#34;&gt;目的&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;org-modeからlatex経由で，文献がnumberingされ文献リストも付いたpdfを出力できるようにする&lt;/li&gt;
&lt;li&gt;org-modeから，文献がnumberingされ文献リストも付いたhtmlを出力できるようにする&lt;/li&gt;
&lt;li&gt;org-modeから，文献がnumberingされ文献リストも付いたwordファイルを出力できるようにする&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;org-modeで論文を書く利点&#34;&gt;org-modeで論文を書く利点&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;LaTeXのややこしいコマンドを覚えなくても普通に文章を書いていけば，pdfで出力できる．&lt;/li&gt;
&lt;li&gt;latexの力を借りることで，文献の引用やリストの作成を自動化できる．&lt;/li&gt;
&lt;li&gt;必要なら，htmlとしても出力できる．&lt;/li&gt;
&lt;li&gt;どうしても必要なら，pandocの力を借りて，なんとMicrosoft Wordのファイルとしても出力できてしまう．&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;org-modeの設定-セットアップ-pdfとhtmlへの出力用&#34;&gt;org-modeの設定・セットアップ（pdfとhtmlへの出力用）&lt;/h2&gt;

&lt;p&gt;設定が最もよくまとまっているのは&lt;a href=&#34;https://texwiki.texjp.org/?Emacs%2FOrg%20mode&#34; target=&#34;_blank&#34;&gt;TeX Wiki Emacs/Org mode&lt;/a&gt; 設定例のmacOSの部分である．正統派の方は，こちらを参考にしていただきたい．&lt;/p&gt;

&lt;p&gt;私は，&lt;a href=&#34;https://ctan.org/pkg/koma-script&#34; target=&#34;_blank&#34;&gt;koma-script – A bundle of versatile classes and packages&lt;/a&gt; と &lt;a href=&#34;https://tufte-latex.github.io/tufte-latex/&#34; target=&#34;_blank&#34;&gt;Tufte-LaTeX&lt;/a&gt; を気に入っており，ほぼこれらしか使わないので，その設定を書いておく．その前に少し情報をまとめておく．&lt;/p&gt;

&lt;h3 id=&#34;koma-script-a-bundle-of-versatile-classes-and-packages&#34;&gt;&lt;a href=&#34;https://ctan.org/pkg/koma-script&#34; target=&#34;_blank&#34;&gt;koma-script – A bundle of versatile classes and packages&lt;/a&gt;&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;参考サイト１：&lt;a href=&#34;http://konoyonohana.blog.fc2.com/blog-category-12.html&#34; target=&#34;_blank&#34;&gt;Koma-Script 入門　～初歩の初歩～&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト２：&lt;a href=&#34;https://ichiro-maruta.blogspot.com/2013/03/latex.html&#34; target=&#34;_blank&#34;&gt;使ってはいけない LaTeX のコマンド・パッケージ・作法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト３：&lt;a href=&#34;https://qiita.com/zr%5Ftex8r/items/297154ca924749e62471&#34; target=&#34;_blank&#34;&gt;LaTeX の「アレなデフォルト」 傾向と対策&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;アメリカ生まれのaritcleなどの欧文標準文書クラスはデフォルトがレターサイズで余白が広すぎてしまう．これに対して，ヨーロッパ生まれのkoma-scriptはa4がデフォルトで，余白も広すぎず，レイアウトもなんとなくオシャレ（笑）である．当然のことながら，texliveに含まれており，texliveをインストールした時点で，インストールされている．&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;tufte-latex&#34;&gt;&lt;a href=&#34;https://tufte-latex.github.io/tufte-latex/&#34; target=&#34;_blank&#34;&gt;Tufte-LaTeX&lt;/a&gt;&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;参考サイト１： &lt;a href=&#34;https://github.com/tsdye/tufte-org-mode/blob/master/README.md&#34; target=&#34;_blank&#34;&gt;tufte-org-mode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.edwardtufte.com/tufte/index&#34; target=&#34;_blank&#34;&gt;Edward R. Tufte&lt;/a&gt;によって作られたページレイアウト．典型的には文章が左側に配置され，右側には広いマージンがありノート，文献，表，図などが配置されるスタイルである．こういうスタイルはよく見かけるものだと思うが，作者がはっきりしているとは，恥ずかしながら全く知らなかった．&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/tsdye/tufte-org-mode/blob/master/README.md&#34; target=&#34;_blank&#34;&gt;tufte-org-mode&lt;/a&gt;はこのtufte classをorg-modeから使えるようにした有り難いパッケージである．&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;org-bullet&#34;&gt;org-bullet&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;参考サイト１：&lt;a href=&#34;https://github.com/sabof/org-bullets&#34; target=&#34;_blank&#34;&gt;https://github.com/sabof/org-bullets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト２：&lt;a href=&#34;http://www.howardism.org/Technical/Emacs/orgmode-wordprocessor.html&#34; target=&#34;_blank&#34;&gt;http://www.howardism.org/Technical/Emacs/orgmode-wordprocessor.html&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;pdf出力とは関係ないが，ついでに触れておく．要するにorg-modeの見た目が良くなるパッケージである．星印が色付きの丸や二重丸になる．やる気に繋がるので，見た目は大事である．こんな感じになる．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/org-bullet.jpg&#34; &gt;

&lt;img src=&#34;/img/org-bullet.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;init.elには以下のように&lt;a href=&#34;https://github.com/jwiegley/use-package&#34; target=&#34;_blank&#34;&gt;use-package&lt;/a&gt;を用いて記述してインストール兼設定となる．もちろん，これも以前の記事（&lt;a href=&#34;../init_org&#34;&gt;Emacsの設定（その2）設定ファイル（init.el）をorg-modeで管理する&lt;/a&gt;）で説明したように，init.orgに書いたものから生成されたinit.elである．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;(use-package org-bullets
  :ensure t
  :config
  (add-hook &#39;org-mode-hook (lambda () (org-bullets-mode 1))))
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;org-modeのinit-dot-elの設定-pdf出力用&#34;&gt;org-modeのinit.elの設定（pdf出力用）&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;前述のごとく，koma-scriptとTufte-LaTeXについて設定する．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;何回もしつこいようだが，これも以前の記事（&lt;a href=&#34;../init_org&#34;&gt;Emacsの設定（その2）設定ファイル（init.el）をorg-modeで管理する&lt;/a&gt;）で説明したように，init.orgに書いたものから生成されたinit.elである．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;(require &#39;ox-latex)
(add-to-list &#39;auto-mode-alist &#39;(&amp;quot;\\.org$&amp;quot; . org-mode))
(setq org-latex-default-class &amp;quot;bxjsarticle&amp;quot;)

(add-to-list &#39;org-latex-classes
             &#39;(&amp;quot;koma-article&amp;quot;
               &amp;quot;\\documentclass{scrartcl}&amp;quot;
               (&amp;quot;\\section{%s}&amp;quot; . &amp;quot;\\section*{%s}&amp;quot;)
               (&amp;quot;\\subsection{%s}&amp;quot; . &amp;quot;\\subsection*{%s}&amp;quot;)
               (&amp;quot;\\subsubsection{%s}&amp;quot; . &amp;quot;\\subsubsection*{%s}&amp;quot;)
               (&amp;quot;\\paragraph{%s}&amp;quot; . &amp;quot;\\paragraph*{%s}&amp;quot;)
               (&amp;quot;\\subparagraph{%s}&amp;quot; . &amp;quot;\\subparagraph*{%s}&amp;quot;)))

(add-to-list &#39;org-latex-classes
             &#39;(&amp;quot;koma-jarticle&amp;quot;
               &amp;quot;\\documentclass{scrartcl}
               \\usepackage{amsmath}
               \\usepackage{amssymb}
               \\usepackage{xunicode}
               \\usepackage{fixltx2e}
               \\usepackage{zxjatype}
               \\usepackage[hiragino-dx]{zxjafont}
               \\usepackage{xltxtra}
               \\usepackage{graphicx}
               \\usepackage{longtable}
               \\usepackage{float}
               \\usepackage{wrapfig}
               \\usepackage{soul}
               \\usepackage{hyperref}&amp;quot;
               (&amp;quot;\\section{%s}&amp;quot; . &amp;quot;\\section*{%s}&amp;quot;)
               (&amp;quot;\\subsection{%s}&amp;quot; . &amp;quot;\\subsection*{%s}&amp;quot;)
               (&amp;quot;\\subsubsection{%s}&amp;quot; . &amp;quot;\\subsubsection*{%s}&amp;quot;)
               (&amp;quot;\\paragraph{%s}&amp;quot; . &amp;quot;\\paragraph*{%s}&amp;quot;)
               (&amp;quot;\\subparagraph{%s}&amp;quot; . &amp;quot;\\subparagraph*{%s}&amp;quot;)))

;; tufte-handout class for writing classy handouts and papers
(add-to-list &#39;org-latex-classes
             &#39;(&amp;quot;tufte-handout&amp;quot;
               &amp;quot;\\documentclass[twoside,nobib]{tufte-handout}
                                 [NO-DEFAULT-PACKAGES]
                \\usepackage{zxjatype}
                \\usepackage[hiragino-dx]{zxjafont}&amp;quot;
               (&amp;quot;\\section{%s}&amp;quot; . &amp;quot;\\section*{%s}&amp;quot;)
               (&amp;quot;\\subsection{%s}&amp;quot; . &amp;quot;\\subsection*{%s}&amp;quot;)))
;; tufte-book class
(add-to-list &#39;org-latex-classes
             &#39;(&amp;quot;tufte-book&amp;quot;
               &amp;quot;\\documentclass[twoside,nobib]{tufte-book}
                                [NO-DEFAULT-PACKAGES]
                 \\usepackage{zxjatype}
                 \\usepackage[hiragino-dx]{zxjafont}&amp;quot;
               (&amp;quot;\\part{%s}&amp;quot; . &amp;quot;\\part*{%s}&amp;quot;)
               (&amp;quot;\\chapter{%s}&amp;quot; . &amp;quot;\\chapter*{%s}&amp;quot;)
               (&amp;quot;\\section{%s}&amp;quot; . &amp;quot;\\section*{%s}&amp;quot;)
               (&amp;quot;\\subsection{%s}&amp;quot; . &amp;quot;\\subsection*{%s}&amp;quot;)
               (&amp;quot;\\paragraph{%s}&amp;quot; . &amp;quot;\\paragraph*{%s}&amp;quot;)))
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;私はxelatexを使っているので，compileは以下のように設定している．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;(setq org-latex-pdf-process
      &#39;(&amp;quot;xelatex -interaction nonstopmode -output-directory %o %f&amp;quot;
        &amp;quot;bibtex %b&amp;quot;
        &amp;quot;xelatex -interaction nontopmode -output-directory %o %f&amp;quot;
        &amp;quot;xelatex -interaction nonstopmode -output-directory %o %f&amp;quot;))
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ここまでEmacsを設定した上で，orgで原稿を書き，C-c C-eと打てば，以下のような画面になる．なお，pandocやTufteの項は別途記事にするので，とりあえずは無視してほしい．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/org-C-c-C-e.jpg&#34; &gt;

&lt;img src=&#34;/img/org-C-c-C-e.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;pdfで出力したければ，さらに，l o と打つと，As PDF file and openを選択したことになり，原稿がpdfとして出力され，かつ，skimでそのpdfがオープンされる．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;同じく，htmlで出力したければ，h o と打つと，As HTML file and openを選択したことになり，ブラウザーでそのhtmlがオープンされる．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;org-modeで論文を書く-の実例&#34;&gt;「org-modeで論文を書く」の実例&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;それでは実例を示してみる．以下のような書類を作成し，hogefuga.orgとして保存する．hoge_fuga.jpgはorg fileと同じdirectoryにあるものとする．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;前半の＃で始まる行が続く部分はorg-modeの設定であり，latexのこのパッケージを使うぞ，とか，org-modeのヘッダーをどの深さまで表示するかなどを決めている．詳細はググればすぐに分かるので略&amp;hellip;..(^^;;;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;#+LaTeX_CLASS: koma-jarticle
#+LaTeX_CLASS_OPTIONS: [12pt]
#+LATEX_HEADER: \usepackage{geometry}
#+LATEX_HEADER: \geometry{left=1in,right=1in,top=1in,bottom=1in}
#+LaTeX_HEADER: \usepackage[sort,compress,super,comma]{natbib}
#+STARTUP:  overview
#+STARTUP:  hidestars
#+OPTIONS:   H:4 num:nil toc:nil \n:nil @:t ::t |:t ^:t -:t f:t *:t TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+OPTIONS: date:nil
#+LINK_UP:
#+LINK_HOME:

#+TITLE: hoge/fugaによる相補的な治療における高難度症例の治療と成績
#+AUTHOR: taipapa, 織田信長, 豊臣秀吉, 徳川家康
\vspace*{-1.5cm}

\hspace{2.5cm} hogefuga大学大学院 hogefuga研究科 hogefuga分野

* 背景と目的
hogeとfugaを比較してみると，一方で難易度の高い症例でも他方では容易に行える場合も多い．当施設では，一方に片寄ることなく，hogeとfugaを相補的に用いることにより合併症の減少を目指す方針をとっている．そこで，自験例から高難度のhogefuga症例についての方針と成績を主にhogefuga surgeonの立場から検討した．
* 結果
hogefuga症例の画像である (*Fig. [[hoge_fuga]]*)．

#+NAME: hoge_fuga
#+caption: hoge-fuga（重症例である）
#+attr_latex: :float t :width 3in  :align center
#+ATTR_HTML: :width 500  :float: wrap :align center
[[./hoge_fuga.jpg]]

* 結論
hogefugaによる治療は有効である．
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ついで，前述のごとく，Emacsでこの文書を開いた状態で，C-c C-e l oと打てば，以下のようなpdfがskimで開かれる．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/hogefuga_text.jpg&#34; &gt;

&lt;img src=&#34;/img/hogefuga_text.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;また，C-c C-e h oと打てば，以下のようなhtmlがbrowserで開かれる．latexのコマンドが見えてしまっているのがご愛嬌だが，htmlにしか出力しないのであれば，削除すればよい．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/hogefuga_html.jpg&#34; &gt;

&lt;img src=&#34;/img/hogefuga_html.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;長くなったので，ここまでとし，文献の引用の設定は次回の記事にまとめることとする．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>beamerでスライド原稿用pdfを作成する（その3）動画が走るスライド原稿を作る（media9に関する追記）</title>
      <link>/post/beamer_movie2/</link>
      <pubDate>Sun, 26 Aug 2018 00:00:00 +0900</pubDate>
      <guid>/post/beamer_movie2/</guid>
      <description>

&lt;p&gt;前回のポストを書いた後に，念のために調べてみると，どうやら，media9なるものが，いまやpdfに動画を埋め込むために普通に使われているようだということが判明してしまった！う〜む，勉強不足を痛感する．遅れを取り返すべく，早速やってみたので，それを追加報告とする．&lt;/p&gt;

&lt;p&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;
HAHAHUGOSHORTCODE-TOC0-HBHB&lt;/p&gt;

&lt;h2 id=&#34;media9&#34;&gt;media9&lt;/h2&gt;

&lt;p&gt;media9はtexlive2018に含まれており，特に別途インストールする必要はなかった．media9については様々な情報があったが，多くはWindowsやLinuxに関してであり，そのままコピペして動くような極楽情報はなかなか見つからなかった．やはり，餅は餅屋で，OS X TeXにそのものズバリの情報があった．それが参考サイト５である．&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;参考サイト１：&lt;a href=&#34;https://texwiki.texjp.org/?media9&#34; target=&#34;_blank&#34;&gt;TeXWiki media9&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト２：&lt;a href=&#34;https://blog.tokor.org/2016/06/04/TeXでプレゼン-LaTeX-Beamerを使う人のためのTips集/&#34; target=&#34;_blank&#34;&gt;TeXでプレゼン - LaTeX Beamerを使う人のためのTips集&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト３：&lt;a href=&#34;https://www.youtube.com/watch?v=HHzcrP27I08&#34; target=&#34;_blank&#34;&gt;How to embed video files in a PDF using LaTeX (a media9/beamer example)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト４：&lt;a href=&#34;http://empitsu.hatenablog.com/entry/2012/11/02/182722&#34; target=&#34;_blank&#34;&gt;Beamer で PDF ファイルに動画を埋め込む&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト５：&lt;a href=&#34;http://tug.org/pipermail/macostex-archives/2014-July/052673.html&#34; target=&#34;_blank&#34;&gt;media9 problems&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;beamerで動画が走るスライド原稿を作る-media9版&#34;&gt;beamerで動画が走るスライド原稿を作る（media9版）&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;同一directoryにhogefuga.movがあるとすれば，以下のように書けば良い&lt;/li&gt;

&lt;li&gt;&lt;p&gt;preambleに，\usepackage{media9}を忘れずに追加しておく．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;\newcommand{\showmovie}[1]{\includemedia[
  activate=pageopen,
  deactivate=pageclose,
  width=110mm, height=72mm,
  addresource=#1,
  flashvars={
    src=#1
    &amp;amp;loop=true
    &amp;amp;autoPlay=false
  }
  ]{}{StrobeMediaPlayback.swf}
}

\begin{frame}
  \frametitle{hogefugaの動画}
  \centering
  \showmovie{hogefuga.mov}
\end{frame}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;110mmと72mmの数値はフレーム内の動画の収まり具合により適宜調整する．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;loopは，ループ再生するかどうか&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;autoplayは自動再生するかどうか&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;media9を使用したときの利点&#34;&gt;media9を使用したときの利点&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;なんと言ってもべた書きよりもelegant!&lt;/li&gt;
&lt;li&gt;スライドを開けたときに，何もしなくても動画の静止画が映るので，前回のやり方のように背景をべた書きしなくて良い．&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;media9を使用したときの欠点&#34;&gt;media9を使用したときの欠点&lt;/h2&gt;

&lt;p&gt;もう完全にmedia9に乗り換えるつもりでいたが，以下に述べるようにいくつか欠点もあることが判明した．&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;media9はpdf自体に動画を埋め込むようである．したがって，200MBの動画を走らせるとすると，pdf自体が200MB以上の大きさになってしまう．&lt;/li&gt;
&lt;li&gt;それだけでなく，200MB程度の動画になると，途中で固まってしまう！これでは使い物にならない．&lt;/li&gt;
&lt;li&gt;一方，前回記事のべた書き方式だと，pdf自体に動画を埋め込まないので，pdfは大きくならないし，動画指定のパスは効くし，200MBだろうともっと大きかろうと動画はガンガン動く．&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;結論&#34;&gt;結論&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;容量の小さな動画であれば，media9でも十分であろう．&lt;/li&gt;
&lt;li&gt;私のように，容量の大きな動画を使用するような場合は，べた書きを使用するほうが良いであろう．&lt;/li&gt;
&lt;li&gt;ということで，結局，元の木阿弥に戻ることとなった．&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>beamerでスライド原稿用pdfを作成する（その2）動画が走るスライド原稿を作る</title>
      <link>/post/beamer_movie/</link>
      <pubDate>Sat, 25 Aug 2018 00:00:00 +0900</pubDate>
      <guid>/post/beamer_movie/</guid>
      <description>

&lt;p&gt;実は，同じような内容について2010年に，&lt;a href=&#34;https://oku.edu.mie-u.ac.jp/tex/mod/forum/discuss.php?d=399#p2100&#34; target=&#34;_blank&#34;&gt;TeX QA&lt;/a&gt; に投稿しているが，その後現在に至るまで使い続けることができており，一応，こちらでもまとめておくことにした．&lt;/p&gt;

&lt;h2 id=&#34;beamerで動画が走るスライド原稿を作る&#34;&gt;beamerで動画が走るスライド原稿を作る&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;前述した ，&lt;a href=&#34;https://oku.edu.mie-u.ac.jp/tex/mod/forum/discuss.php?d=399#p2100&#34; target=&#34;_blank&#34;&gt;TeX QA&lt;/a&gt; に経緯は投稿してあるので，詳細はそちらを読んでいただきたい．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;参考にしたのは，Adobeのpdfのマニュアル（DVI specials for PDF generation） &lt;a href=&#34;https://www.tug.org/TUGboat/tb30-1/tb94cho.pdf&#34; target=&#34;_blank&#34;&gt;https://www.tug.org/TUGboat/tb30-1/tb94cho.pdf&lt;/a&gt; の以下の部分&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;3 Annotations

An annotation is considered as an object with a location on a page. The type of the object is given by the value of the key `/Subtype&#39;, for instance, `/Text&#39;, `/Link&#39;, `/Sound&#39;, `/Movie&#39;, etc. (See [1, p. 615] for the list of all annotation types.) The location is given by an array object associated to the key `/Rect&#39;. DVIPDFM(x) provides the following special command for annotations............

 The following example shows a movie annotation that enables us to run the movie file ‘mymovie.avi’ inside a PDF viewer program.

 \special{pdf:ann bbox 0 0 360 180 &amp;lt;&amp;lt;
 /Subtype /Movie /Border [1 0 0]
 /T (My Movie) /Movie &amp;lt;&amp;lt;
 /F (mymovie.avi) /Aspect [720 360]
 /Poster true &amp;gt;&amp;gt;
 /A &amp;lt;&amp;lt; /ShowControls false &amp;gt;&amp;gt; &amp;gt;&amp;gt;}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;アスペクト比やコントロールバーの有無，リピートするかどうかなども指示できる（下記参照）&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;mymovie.aviのところに動かしたい動画を記入（パスも効く）&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;私の作成したものは読んでいただければおわかりのように，非常にダサいベタ書きである．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;最近の書き方は以下の通りで，もっぱら，mov形式の画像を使用している．コンテナがaviやwmvだと動かないが，Mac以外でどうなるのかは不明．そういえば，Windowsで試したことはなかった&amp;hellip;..&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;{
    \usebackgroundtemplate{\put(20, -265){\includegraphics[scale=0.45]{/Data/.../..../Figures/hogefuga.pdf}}}
    \begin{frame}
    \frametitle{hogefugaの対策}
    \special{pdf:ann bbox -10 -130 320 90 &amp;lt;&amp;lt;
             /Subtype /Movie /Border [0 0 1]
             /T (My Movie) /Movie &amp;lt;&amp;lt;
             /F (/Data/.../hogefuga.mov)
             %/Aspect [720 480]
             /Aspect [640 480]
             /Poster false &amp;gt;&amp;gt;
             /A &amp;lt;&amp;lt; /ShowControls true /Mode /Repeat &amp;gt;&amp;gt; &amp;gt;&amp;gt;}
    \end{frame}
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;\usebackgroundtemplateの部分には動画のキャプチャー画像を貼り付けておく．なにもないと，動画が動き出す前の画面が空白になってしまう（もっと良い方法があれば，どなたかご教示ください）．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;\putで背景画像（キャプチャー画像）の位置を直接指定し，\includegraphicsのscaleで倍率を指定して動画の大きさに合わせている．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;これで，画像をクリックすると（ほぼ）同じ大きさの動画が（ほぼ）同じ位置で動くようになる&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;動画の大きさはbboxで，かぶせる静止画の大きさはscaleで調整する．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;プレゼンテーションにskimを使うと動画が動かないので注意．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;動画は同一directoryにある必要はなく，パスで指定すれば良い&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;動画自体はpdfの中に埋め込まれないので，pdfの容量がむやみに大きくならないという利点がある．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Adobe Acrobat Readerでプレゼンすれば，動画は動くし，音もでる．コントロールバーにより早送りなども可能．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;最初にpdfで動画をクリックすると「セキュリティ上の問題．．．」というメッセージが表示される．この横にあるオプションボタンをクリックして，信頼するを選択すれば，動画が動くようになる．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>beamerでスライド原稿用pdfを作成する（その１）</title>
      <link>/post/beamer/</link>
      <pubDate>Fri, 24 Aug 2018 00:00:00 +0900</pubDate>
      <guid>/post/beamer/</guid>
      <description>

&lt;p&gt;前回のポスト（&lt;a href=&#34;../latexmk&#34;&gt;LaTeXをインストールし，texファイルが変更されると，自動的にcompileしてskimでのpdfも自動で更新されるようにする（2018年9月1日追記）&lt;/a&gt;）により，既にLaTeXはインストールされたので，今回は学会発表向けのスライド原稿作成についてまとめる．ようやく実質的な話になる．
　&lt;/p&gt;

&lt;h2 id=&#34;beamerによるスライド原稿の作成&#34;&gt;beamerによるスライド原稿の作成&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;基本的には，通常のLaTeX文書と同じである．実際のスライド原稿を見てもらうほうが早いであろう．以下のtexファイルを作成し，beamer_test.texと名付け，保存する．Editorは何でも良いが，やはり，Emacsのauctexを使うと補完などあり，便利である．&lt;/li&gt;
&lt;li&gt;下記のファイルには多少コメントを付けた．フォントの指定は自明．themeは山のようにあるので，ググって好きなものを使う．&lt;/li&gt;
&lt;li&gt;なお， \usefonttheme{professionalfonts} を入れているのは，これを入れないと，beamer は数式フォントとして sans に指定されたフォントを使うように内部で変更するからで，これを入れるとこの変更を無効にできる．数式がヒラギノになると間抜けである．昔，TeX QAで教えていただいた．参考：&lt;a href=&#34;https://oku.edu.mie-u.ac.jp/tex/mod/forum/discuss.php?d=729&#34; target=&#34;_blank&#34;&gt;beamerでの数式フォントの変更&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;また，いろいろ余分なパッケージも読み込んでいるが，必要なときに書き込めば良く，不要なら削除する．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;% -*-coding:utf-8-*-
\documentclass[svgnames, table, 14pt]{beamer}
\usepackage{zxjatype}
\usepackage[hiragino-dx]{zxjafont}

% ヒラギノ角ゴ Proを使う
\setjamainfont[Scale=0.95,BoldFont=ヒラギノ角ゴ Pro W6]{ヒラギノ角ゴ Pro W3}
\setjasansfont[Scale=0.95,BoldFont=ヒラギノ角ゴ Pro W6]{ヒラギノ角ゴ Pro W3}

% themeを指定する
\usetheme{Darmstadt}

\usefonttheme[onlylarge]{structurebold}
\setbeamerfont*{frametitle}{size=\large,series=\bfseries}
\setbeamertemplate{navigation symbols}{}

\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
\usepackage{times}
\usepackage[T1]{fontenc}
\usepackage{hyperref}

% Setup TikZ
\usepackage{tikz}
\usetikzlibrary{arrows}
\tikzstyle{block}=[draw opacity=0.7,line width=1.4cm]
% Figure position
\usepackage[absolute,overlay]{textpos}
% math
\usepackage{mathabx}

\usefonttheme{professionalfonts}

% Author, Title, etc.
\title[hoge/fugaによる相補的な治療における高難度症例の治療と成績]
{hoge/fugaによる相補的な治療における高難度症例の治療と成績}
\author[taipapa]
{taipapa, 織田信長, 豊臣秀吉, 徳川家康}
\institute[hogefuga University]
{hogefuga大学大学院 hogefuga研究科　hogefuga分野}


\date[日本hogefuga外科学会 第??回学術総会　\hspace{2.4cm} 201X年X月XX日]
{\scriptsize{Symposium-02「とっーても難しいhogeとfuga」
\\ \vspace{0.15cm} 筆頭演者はhogefuga外科学会へ過去3年間のCOI自己申告を
完了しています．\\本演題の発表に関して開示すべきCOIはありません
}}

% 学会名，日付，スライド番号を挿入
\setbeamertemplate{footline}
{\color{gray} %
\hspace{.075cm}
\insertshortdate%
\hspace{4cm}
\insertframenumber{} / \inserttotalframenumber%
}

\begin{document}

\begin{frame}
\titlepage
\end{frame}

\section{Introduction}

\begin{frame}{背景と目的}
\begin{block}{}
\begin{itemize}
\item hogeとfugaを比較してみると，一方で難易度の高い症例で
も他方では容易に行える場合も多い.
\item 当施設では，一方に片寄ることなく，hogeとfugaを相補的に
用いることにより合併症の減少を目指す方針をとっている．
\item そこで，自験例から高難度のhogefuga症例についての
方針と成績を主にhogefuga surgeonの立場から検討した.
\end{itemize}
\end{block}
\end{frame}

\section{Results}
\begin{frame}
\frametitle{hogefuga症例の画像}
\centering
\includegraphics[width=3.5in]{hoge_fuga.pdf}
\end{frame}
\end{document}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ターミナルで，cdして上記のbeamer_test.texのあるdirectoryに移動し，shellで以下のように打ち込む．前回のポスト（&lt;a href=&#34;../latexmk&#34;&gt;LaTeXをインストールし，texファイルが変更されると，自動的にcompileしてskimでのpdfも自動で更新されるようにする&lt;/a&gt;を参考　&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;latexmk -pvc -pdf -view=none beamer_test.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;これで下記のようなpdfが出来上がるはず．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/beamer_test.jpg&#34; &gt;

&lt;img src=&#34;/img/beamer_test.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;








&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/beamer_test2.jpg&#34; &gt;

&lt;img src=&#34;/img/beamer_test2.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;画像の貼り付けが必要なら，上の文書にもあるように必要な箇所で，&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;\includegraphics[width=2in]{/Data/hoge/fuga/......./hoge_fuga.pdf}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;などと打てばよい．以下のようなスライドが得られる．&lt;/p&gt;







&lt;figure&gt;

  &lt;a data-fancybox=&#34;&#34; href=&#34;/img/beamer_test3.jpg&#34; &gt;

&lt;img src=&#34;/img/beamer_test3.jpg&#34; width=&#34;100%&#34; &gt;
&lt;/a&gt;

&lt;/figure&gt;
&lt;/li&gt;

&lt;li&gt;&lt;p&gt;なにもしなければ，画像は左寄せになる．中央に寄せたければ，上記の文書内にあるように，\centering を使用する．&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;次回は，beamerで動画を走らせる件について書く予定．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>LaTeXをインストールし，texファイルが変更されると，自動的にcompileしてskimでのpdfも自動で更新されるようにする（2018年9月1日追記）</title>
      <link>/post/latexmk/</link>
      <pubDate>Sun, 19 Aug 2018 00:00:00 +0900</pubDate>
      <guid>/post/latexmk/</guid>
      <description>

&lt;p&gt;&lt;h2&gt;Table of Contents&lt;/h2&gt;
HAHAHUGOSHORTCODE-TOC0-HBHB&lt;/p&gt;

&lt;h2 id=&#34;tex-live-2018のインストール&#34;&gt;TeX Live 2018のインストール&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;参考サイト１：&lt;a href=&#34;https://texwiki.texjp.org/?TeX%20Live&#34; target=&#34;_blank&#34;&gt;TeX Wiki TeX Live&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト２：&lt;a href=&#34;https://texwiki.texjp.org/?TeX%20Live%2FMac&#34; target=&#34;_blank&#34;&gt;TeX Wiki TeX LiveMac&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;参考サイト３：&lt;a href=&#34;http://www.tug.org/mactex/&#34; target=&#34;_blank&#34;&gt;The MacTeX-2018 Distribution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;上記サイトを参考にTeX Live 2018もしくはMacTeX-2018をインストールする．&lt;/li&gt;
&lt;li&gt;これでスライド作成ソフトであるbeamerも一緒にインストールされる．&lt;/li&gt;
&lt;li&gt;beamerに固有の設定は特に必要なし．&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;tex-live-2018のインストール-2018年9月1日追記&#34;&gt;TeX Live 2018のインストール（2018年9月1日追記）&lt;/h2&gt;

&lt;p&gt;大事なことを２つ忘れていたので追記する．&lt;/p&gt;

&lt;h3 id=&#34;ヒラギノフォントの埋め込みなど&#34;&gt;ヒラギノフォントの埋め込みなど&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;参考サイト：&lt;a href=&#34;http://doratex.hatenablog.jp/entry/20180501/1525144736&#34; target=&#34;_blank&#34;&gt;MacTeX 2018のインストール&amp;amp;日本語環境構築法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;こんなところを読んでいないで，直ちに上記のサイトに飛んでいただきたい．&lt;/li&gt;
&lt;li&gt;マックユーザーにとっての最大の問題点は &lt;strong&gt;「macos標準添付のヒラギノフォントなど商用フォントに関する設定ファイル群が，TeX LiveからTLContriに移動になった」&lt;/strong&gt; ということである．この問題に対する対応方法は，すべて上記のサイトに記載されているので，そのとおりにすれば良い．実にありがたい．&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;インストール後のパスの修正-symbolic-linkを張る&#34;&gt;インストール後のパスの修正（symbolic linkを張る）&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;参考サイト：&lt;a href=&#34;https://texwiki.texjp.org/?TeX%20Live%2FMac&#34; target=&#34;_blank&#34;&gt;TeX Wiki TeX LiveMac&lt;/a&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;MacTeX 2018を普通にインストールすると，/usr/local/texlive/2018/bin/x86_64-darwin/bibtexというふうにbinの下にx86_64-darwinというdirectoryが入って，tex関連のコマンドのパスが上手く通らなくなる．そこで，上記の&lt;a href=&#34;https://texwiki.texjp.org/?TeX%20Live%2FMac&#34; target=&#34;_blank&#34;&gt;TeX Wiki TeX LiveMac&lt;/a&gt;に書いてあるように，/usr/local/binディレクトリの下にsymbolic linkを張る．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ sudo /usr/local/texlive/????/bin/*/tlmgr path add
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;上記でうまくいかないときは下記のように具体的なディレクトリ名を指定する．&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ sudo /usr/local/texlive/2018/bin/x86_64-darwin/tlmgr path add
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;auctexのインストールと設定&#34;&gt;auctexのインストールと設定&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;latex文書を扱うなら，Emacsのパッケージであるauctexが最強（according to 独断と偏見）&lt;/li&gt;
&lt;li&gt;preludeをインストールした時点で，auctexもインストールされる．&lt;/li&gt;
&lt;li&gt;auctexの設定などについては以下を参照（手抜き&amp;hellip;.. (^^;;; ）

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.gnu.org/software/auctex/&#34; target=&#34;_blank&#34;&gt;AUCTEX – Sophisticated document creation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?AUCTeX&#34; target=&#34;_blank&#34;&gt;TeX Wiki AUCTeX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mytexpert.osdn.jp/index.php?Emacs/AUCTeX&#34; target=&#34;_blank&#34;&gt;Emacs/AUCTeX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://skalldan.wordpress.com/2011/07/20/auctex-の設定と便利な機能/&#34; target=&#34;_blank&#34;&gt;AUCTeX の設定と便利な機能&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;しかし，org-modeを使うようになってからは直接latex文書を打つことはめっきり少なくなってしまった．それでも，学会発表用のスライドなどはlatexを直接打って，beamer文書を作成し，pdf原稿に変換している．&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;latexmk&#34;&gt;latexmk&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Emacsでbeamerを使って，スライド原稿などを作成していると，C-c C-cするたびにtex文書がcompileされてpdf原稿が出来上がるのを待たなければならず，この待ち時間が結構辛い．そこで，tex ファイルの変更が保存されるたびに自動で裏でlatexmkがcompileしてくれるようにする．latexmkを使う．&lt;/li&gt;
&lt;li&gt;参考サイト：&lt;a href=&#34;https://texwiki.texjp.org/?Latexmk&#34; target=&#34;_blank&#34;&gt;TeX Wiki Latexmk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;texlive2018, MacTeXに入っているので，これらを入れていれば別途インストールする必要なし．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;~/.latexmkrcの中に以下のように記述する（ちなみに私はxelatexを使用している）&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-lisp&#34;&gt;$pdflatex = &#39;xelatex -interaction=nonstopmode -synctex=1 %O %S&#39;;
$pdf_mode = 1;
$postscript_mode = $dvi_mode = 0;
$pdf_previewer  = &#39;open -a Skim&#39;;
$preview_continuous_mode = 1;  # equivalent to -pvc
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;実際の作業&#34;&gt;実際の作業&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;上記のようにセットアップしていることとする．&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ターミナルで，texファイルが有るdirectoryに移動し，&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;latexmk -pvc -pdf -view=none document.tex
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;これで，texファイルへの変更を保存すると自動でコンパイルされて，設定にもよるが，skimで開いているpdfファイルも更新される．&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;xelatexについて&#34;&gt;XeLaTeXについて&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;以下を参照されたい．特に最初にあげたZRさんの文書は必読！

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://zrbabbler.sp.land.to/xelatex.html&#34; target=&#34;_blank&#34;&gt;XeLaTeX で日本語する件について&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://texwiki.texjp.org/?XeTeX&#34; target=&#34;_blank&#34;&gt;TeXWiki XeTeX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://suzusime-log.hatenablog.jp/entry/2017/04/15/210327&#34; target=&#34;_blank&#34;&gt;XeLaTeXだとかな混植が簡単にできて最高だという話&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>
